<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Tile Top Off</title>

		<meta charset="utf-8">
		<meta name="author" content="Cam Olson">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-title" content="Tile Top Off">
		<meta name="description" content="Simple Tile Puzzle Game">
		<meta name="theme-color" content="#333333">

		<link rel="stylesheet" href="/styles/main.css">
		<link rel="stylesheet" href="/styles/sliders.css">
		<link rel="stylesheet" href="/styles/scrollbar.css">
		<link rel="icon" href="/media/images/icons/icon-64x64.png">
		<link rel="manifest" href="/public/manifest.json">
		<link rel="apple-touch-icon" href="/media/images/icons/icon-512x512.png">

		<script src="/scripts/popup.js"></script>
		<script src="/scripts/menu.js"></script>
		<script src="/scripts/game.js"></script> 
		<script src="/scripts/install.js"></script>
		<script src="/scripts/menus/start.js"></script>

		<script>
			if ("serviceWorker" in navigator) {
				window.addEventListener("load", () => {
					navigator.serviceWorker.register("/service-worker.js").then((reg) => {
						console.log("Service worker registered.", reg);
					});
				});
			}
		</script>
	</head>
	<body>
		<main id="game">
			<section id="board">
				<div class="tiles" id="tiles"></div>
				<div id="status" class="status-shown" style="background-color:Black">
					<p id="statusMain" class="status-shown"></p>
					<p id="statusSub" class="status-shown"></p>
				</div>
			</section>
			<div id="hold-indicator"></div>

		</main>
		
		<section id="start-screen">
			<h1>Tile Top Off</h1>
			<nav id="start-buttons">

				<!--Play-->
				<button id="start-play" onclick="closePopup(); toggleStartDropDown(document.querySelector('div#play-options')); closeMenu();">Play</button>
				<div id="play-options" class="start-drop-down">
					<h2>Quick Play</h2>
					<section id="quick-play-difficulties" class="start-drop-down-section">
						<button id="start-quick-play-easy" onclick="closePopup(); setDifficulty(0); beginGame(); closeMenu(); closeStartDropDowns();">Easy</button>
						<button id="start-quick-play-norm" onclick="closePopup(); setDifficulty(1); beginGame(); closeMenu(); closeStartDropDowns();">Normal</button>
						<button id="start-quick-play-hard" onclick="closePopup(); setDifficulty(2); beginGame(); closeMenu(); closeStartDropDowns();">Hard</button>	
					</section>
					<h2>Custom Game</h2>
					<section id="custom-game-settings" class="start-drop-down-section">
						<div class="options-section slider-container">
							<label for="board-size-slider">Board Size:</label>
							<output name="board-size" for="board-size-slider"></output>
							<input type="range" min="2" max="10" value="5" class="slider" id="board-size-slider" oninput="onBoardSizeSliderInput()">
						</div>
						<div class="options-section slider-container">
							<label for="path-complexity-slider">Path Complexity:</label>
							<output name="path-complexity" for="path-complexity-slider"></output>
							<input type="range" min="0.05" max="0.70" value="0.5" step="0.01" class="slider" id="path-complexity-slider" oninput="onObstacleSliderInput()">
						</div>
					</section>
					<button id="start-custom-game" onclick="closePopup(); setDifficulty(-1); applyCustomOptions(); beginGame(); closeMenu(); closeStartDropDowns();">Start Custom Game</button>
				</div>

				<!--High Scores-->
				<button id="start-high-scores" onclick="closePopup(); toggleStartDropDown(document.querySelector('div#high-scores')); closeMenu();">High Scores</button>
				<div id="high-scores" class="start-drop-down">
					<p>Easy: <span id="high-score-easy">0</span></p>
					<p>Normal: <span id="high-score-norm">0</span></p>
					<p>Hard: <span id="high-score-hard">0</span></p>
				</div>

				<button id="start-instruction" onclick="closePopup(); showInstructionPopup(); closeMenu();">How to Play</button>
				<button id="start-options" onclick="closePopup(); showOptionsPopup(); closeMenu();">Options</button>
				<div id="start-install-prompt" class="hide-on-install" hidden>
					<p>Tile Top Off can be installed on your device and played offline!</p>
					<button id="start-install" onclick="install();">Install</button>	
				</div>
			</nav>
		</section>

		<section id="popup" class="hidden">
			<a id="exit-popup" onclick="closePopup()"><div class="exit-arrow"></div></a>
			<iframe id="popup-content" src=""></iframe>
		</section>

		<section id="menu">
			<div id="icon" onclick="toggleMenu()">
				<a></a><a></a><a></a>
			</div>

			<nav>
				<a id="exit-to-start-button" onclick="closePopup(); showStartScreen(); closeMenu();">Main Menu</a>
				<a id="instruction-button" onclick="closePopup(); showInstructionPopup(); closeMenu();">How to Play</a>
				<a id="option-button" onclick="closePopup(); showOptionsPopup(); closeMenu();">Options</a>
				<a id="reset-button" onclick="closePopup(); hideStatus(); resetGame(); closeMenu();">Reset</a>
				<a id="install-button" class="hide-on-install" onclick="install();" hidden>Install</a>
			</nav>
		</section>
	</body>
</html>